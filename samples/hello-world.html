<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Dynamsoft MRZ Scanner - Hello World</title>
    <script src="../dist/mrz-scanner.bundle.js"></script>
    <style>
      /* Container styling for testing video fit "cover" */

      #mrz-container {
        width: 80%;
        height: 400px;
        border: 3px solid #2980b9;
        border-radius: 8px;
        margin: 0 auto 20px auto;
        overflow: hidden;
        position: relative;
      }

      /* You can uncomment these to test different container dimensions */

      /* Wide container */
      /*       
      #mrz-container {
        width: 90%;
        height: 300px;
      }
      */

      /* Square container */
      /*
      #mrz-container {
        width: 400px;
        height: 400px;
      }
      */

      /* Tall container */
      /*
      #mrz-container {
        width: 300px;
        height: 500px;
      }
      */
    </style>
  </head>

  <body>
    <h1 style="font-size: large">Dynamsoft MRZ Scanner</h1>
    <div
      id="results"
      style="
        display: flex;
        flex-direction: column;
        width: 100%;
        height: 100%;
        word-wrap: break-word;
      "
    ></div>
    <div id="mrz-container"></div>

    <script>
      const resultContainer = document.querySelector("#results");
      const mrzContainer = document.querySelector("#mrz-container");

      // Initialize the Dynamsoft MRZ Scanner
      const mrzscanner = new Dynamsoft.MRZScanner({
        license: "YOUR_LICENSE_KEY_HERE",
        // container: mrzContainer,
        container: "#mrz-container",
        scannerViewConfig: {
          // showScanGuide: false,
          // showFormatSelector: false,
          // showUploadImage: false,
          // showSoundToggle: false,
        },
        resultViewConfig: {
          // toolbarButtonsConfig: {
          //   done: {
          //     isHidden: true,
          //   },
          // },
          // showOriginalImage: false,
        },
        // mrzFormatType: ["td1", "passport", "td2"],
        // showResultView: false,
      });
      (async () => {
        // Launch the scanner and wait for the result
        const result = await mrzscanner.launch({});
        console.log(result);

        if (result?.data) {
          resultContainer.innerHTML = ""; // Clear placeholder content

          if (result.originalImageResult?.toCanvas) {
            const canvas = result.originalImageResult?.toCanvas();

            canvas.style.objectFit = "contain";
            canvas.style.width = "100%";
            canvas.style.height = "100%";
            resultContainer.appendChild(canvas);
          }

          let resultHTML = ``;
          Object.entries(result.data).forEach(([key, value]) => {
            const div = document.createElement("div");

            if (key === "mrzText") {
              div.innerText = `${key}: ${JSON.stringify(value)}`;
            } else {
              div.innerHTML = `${key}: ${JSON.stringify(value)}`;
            }
            resultContainer.appendChild(div);
          });
        } else {
          resultContainer.innerHTML =
            "<p>No MRZ scanned. Please try again.</p>";
        }
      })();
    </script>
  </body>
</html>
