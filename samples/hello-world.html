<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Dynamsoft MRZ Scanner - Hello World</title>
    <script src="../dist/mrz-scanner.bundle.js"></script>
  </head>

  <body>
    <h1 style="font-size: large">Dynamsoft MRZ Scanner</h1>
    <div
      id="results"
      style="display: flex; flex-direction: column; width: 100%; height: 100%; word-wrap: break-word"
    ></div>

    <script>
      const resultContainer = document.querySelector("#results");

      // Initialize the Dynamsoft MRZ Scanner
      const mrzscanner = new Dynamsoft.MRZScanner({
        license: "YOUR_LICENSE_KEY_HERE",
        scannerViewConfig: {
          // showScanGuide: false,
          // showFormatSelector: false,
          // showUploadImage: false,
          // showSoundToggle: false,
        },
        resultViewConfig: {
          allowResultEditing: true,
          // toolbarButtonsConfig: {
          //   done: {
          //     isHidden: true,
          //   },
          // },
          // showOriginalImage: false,
        },
        // mrzFormatType: ["td1", "passport", "td2"],
        // showResultView: false,
      });
      (async () => {
        // Launch the scanner and wait for the result
        const result = await mrzscanner.launch({});
        console.log(result);

        if (result?.data) {
          resultContainer.innerHTML = ""; // Clear placeholder content

          if (result.originalImageResult?.toCanvas) {
            const canvas = result.originalImageResult?.toCanvas();

            canvas.style.objectFit = "contain";
            canvas.style.width = "100%";
            canvas.style.height = "100%";
            resultContainer.appendChild(canvas);
          }

          let resultHTML = ``;
          Object.entries(result.data).forEach(([key, value]) => {
            const div = document.createElement("div");

            if (key === "mrzText") {
              div.innerText = `${key}: ${JSON.stringify(value)}`;
            } else {
              div.innerHTML = `${key}: ${JSON.stringify(value)}`;
            }
            resultContainer.appendChild(div);
          });
        } else {
          resultContainer.innerHTML = "<p>No MRZ scanned. Please try again.</p>";
        }
      })();
    </script>
  </body>
</html>
